# Описание базы данных CryptoDatabase

## Предметная область
База данных `CryptoDatabase` предназначена для хранения, управления и анализа информации о криптовалютных транзакциях. Она может быть использована в различных приложениях, связанных с учётом криптовалют, управлением активами или проведением аналитики. Основной объект базы данных — запись о транзакции, включающая следующую информацию:

- `TransactionID` (уникальный идентификатор транзакции);
- `UserID` (идентификатор пользователя);
- `CryptoSymbol` (обозначение криптовалюты, например, BTC или ETH);
- `TransactionType` (тип транзакции: покупка или продажа);
- `Amount` (количество криптовалюты);
- `TransactionDate` (дата транзакции);
- `USDValue` (стоимость транзакции в долларах США).

## Поддерживаемые функции
Система предоставляет следующий функционал для работы с базой данных:

### Управление базой данных
1. **Создание новой базы данных**: инициализация базы данных с нуля.
2. **Удаление базы данных**: полное удаление существующей базы данных.
3. **Открытие базы данных**: загрузка данных из файла.
4. **Сохранение базы данных**: сохранение текущего состояния базы данных в файл.
5. **Очистка базы данных**: удаление всех записей из базы данных.
6. **Создание резервной копии**: сохранение текущего состояния базы данных в файл резервной копии.
7. **Восстановление из резервной копии**: восстановление данных из резервного файла.

### Управление записями
1. **Добавление записи**:
   - Проверка уникальности `TransactionID`.
   - Валидация формата данных.
2. **Редактирование записи**:
   - Обновление записи по её `TransactionID`.
   - Автоматическое обновление индексов.
3. **Удаление записи**:
   - По `TransactionID` (ключевое поле).
   - По значению любого неключевого поля (например, `CryptoSymbol`).
4. **Поиск записей**:
   - По ключевому полю `TransactionID`.
   - По любому неключевому полю (например, `UserID` или `CryptoSymbol`).
5. **Импорт данных из CSV**: автоматическая загрузка записей из файла CSV.
6. **Экспорт данных в CSV и Excel**: сохранение текущих данных в формате CSV или Excel.

## Формат ввода

Каждая запись представляет собой словарь с обязательными полями:
```python
{
    "TransactionID": int,       # Уникальный идентификатор транзакции
    "UserID": int,             # Идентификатор пользователя
    "CryptoSymbol": str,       # Символ криптовалюты (например, BTC)
    "TransactionType": str,    # Тип транзакции ("buy" или "sell")
    "Amount": float,           # Количество криптовалюты
    "TransactionDate": str,    # Дата транзакции в формате "YYYY-MM-DD"
    "USDValue": float          # Стоимость в долларах США
}
```

## Сложность реализованных алгоритмов

1. **Добавление записи**:
   - **Сложность**: O(1) для вставки записи, O(log(n)) для обновления индексов (в среднем).
   - Используются структуры данных `SortedDict` для быстрого доступа к индексам.

2. **Удаление записи**:
   - **Сложность**: O(log(n)) для удаления записи из индексов и основного хранилища.

3. **Поиск по индексу**:
   - **Сложность**: O(log(n)) при наличии индекса, O(n) для линейного поиска по неиндексированным полям.

4. **Импорт из CSV**:
   - **Сложность**: O(m * log(n)), где m — количество записей в файле.

5. **Экспорт в Excel и CSV**:
   - **Сложность**: O(n), где n — количество записей в базе данных.

## Примечания по реализации
- Для ускорения операций поиска и удаления используются индексы, построенные с помощью библиотеки `SortedDict`.
- Обработка ошибок реализована для всех операций, включая проверку существования файлов и валидацию вводимых данных.
- Алгоритмы рассчитаны на работу с относительно небольшими объёмами данных (до нескольких миллионов записей). Для больших объёмов может потребоваться доработка структуры данных.
